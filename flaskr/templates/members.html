{% extends "base.html" %}

{% block title %}Member Management - Spartan Teamlog{% endblock %}

{% block content %}
<h1>Member Management</h1>
<p><a href="{{ url_for('main.index') }}">‚Üê Back to Dashboard</a></p>

<div style="margin-bottom: 20px;">
    <a href="{{ url_for('main.checkout_all_members') }}" style="background: #dc3545; color: white; padding: 8px 16px; text-decoration: none; border-radius: 4px; display: inline-block;">üö™ Check Out All Members</a>
</div>

<table border="1" cellpadding="10">
    <tr>
        <th>Name</th>
        <th>ID Hash</th>
        <th>Position</th>
        <th>Status</th>
        <th>Attendance</th>
        <th>Actions</th>
    </tr>
    {% for member in members %}
    <tr>
        <td>
            <a href="{{ url_for('main.member_detail', member_id=member.id) }}" style="color: #007bff; text-decoration: none; font-weight: bold;">
                {{ member.full_name }}
            </a>
        </td>
        <td style="font-family: monospace; color: #6c757d;">{{ member.idhash[:16] }}...</td>
        <td>{{ member.position or 'N/A' }}</td>
        <td>{% if member.active %}Active{% else %}Inactive{% endif %}</td>
        <td>{% if member.checked_in %}Checked In{% else %}Not Checked In{% endif %}</td>
        <td>
            <a href="{{ url_for('main.member_detail', member_id=member.id) }}" style="color: #17a2b8;">View Details</a>
            |
            {% if member.checked_in %}
                <a href="{{ url_for('main.checkout_member', member_id=member.id) }}" style="color: #dc3545;">Check Out</a>
            {% else %}
                <a href="{{ url_for('main.checkin_member', member_id=member.id) }}" style="color: #28a745;">Check In</a>
            {% endif %}
            |
            {% if member.active %}
                <a href="{{ url_for('main.deactivate_member', member_id=member.id) }}" style="color: #ffc107;">Deactivate</a>
            {% else %}
                <a href="{{ url_for('main.activate_member', member_id=member.id) }}" style="color: #17a2b8;">Activate</a>
            {% endif %}
            |
            <a href="{{ url_for('main.edit_member', member_id=member.id) }}" style="color: #007bff;">Edit</a>
            |
            <a href="{{ url_for('main.delete_member', member_id=member.id) }}" onclick="return confirm('Are you sure you want to delete {{ member.full_name }}?')" style="color: #dc3545;">Delete</a>
        </td>
    </tr>
    {% endfor %}
</table>

<h3>Add New Member</h3>
<form method="POST" action="{{ url_for('main.add_member') }}" style="margin-top: 20px;">
    <div style="margin-bottom: 10px;">
        <input type="text" name="first_name" placeholder="First Name" required style="padding: 5px; margin-right: 10px;">
        <input type="text" name="last_name" placeholder="Last Name" required style="padding: 5px; margin-right: 10px;">
        <input type="text" name="idhash" placeholder="ID Hash" required style="padding: 5px; margin-right: 10px;">
    </div>
    <div style="margin-bottom: 10px;">
        <select name="position_id" required style="padding: 5px; margin-right: 10px;">
            <option value="">Select Position (Required)</option>
            {% for position in positions %}
                <option value="{{ position.id }}">{{ position.name.title() }}</option>
            {% endfor %}
        </select>
        <button type="submit" style="padding: 5px 15px; background: #28a745; color: white; border: none; border-radius: 3px;">Add Member</button>
    </div>
</form>
{% endblock %}